<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-data/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>比例尺 | Blog</title><meta name="description" content="A blog and knowledge management system about data and visualization.">
    <link rel="modulepreload" href="/blog-data/assets/app.a4413a59.js"><link rel="modulepreload" href="/blog-data/assets/比例尺.html.eb7ec092.js"><link rel="modulepreload" href="/blog-data/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-data/assets/比例尺.html.628aa718.js">
    <link rel="stylesheet" href="/blog-data/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-data/#"><img src="/blog-data/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Anaconda</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Jupyter</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Math</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Python</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Vis</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Anaconda</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Jupyter</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Math</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Python</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Vis</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="比例尺" tabindex="-1"><a class="header-anchor" href="#比例尺" aria-hidden="true">#</a> 比例尺</h1><p>参考：</p><ul><li><a href="https://observablehq.com/@d3/learn-d3-scales?collection=@d3/learn-d3" target="_blank" rel="noopener noreferrer">Learn D3: Scales</a></li><li><a href="https://github.com/d3/d3/blob/main/API.md#scales-d3-scale" target="_blank" rel="noopener noreferrer">Scales (d3-scale)</a></li><li><a href="https://github.com/d3/d3-scale" target="_blank" rel="noopener noreferrer">d3-scale</a>（非官方<a href="https://github.com/xswei/d3-scale" target="_blank" rel="noopener noreferrer">中译版</a>）</li><li><a href="https://github.com/d3/d3/blob/main/API.md#axes-d3-axis" target="_blank" rel="noopener noreferrer">Axes (d3-axis)</a></li><li><a href="https://github.com/d3/d3-axis" target="_blank" rel="noopener noreferrer">d3-axis</a>（非官方<a href="https://github.com/xswei/d3-axis" target="_blank" rel="noopener noreferrer">中译版</a>）</li><li><a href="https://github.com/d3/d3/blob/main/API.md#interpolators-d3-interpolate" target="_blank" rel="noopener noreferrer">Interpolators (d3-interpolate)</a></li><li><a href="https://github.com/d3/d3-interpolate" target="_blank" rel="noopener noreferrer">d3-interpolate</a>（非官方<a href="https://github.com/xswei/d3-interpolate" target="_blank" rel="noopener noreferrer">中译版</a>）</li><li><a href="https://github.com/d3/d3/blob/main/API.md#color-schemes-d3-scale-chromatic" target="_blank" rel="noopener noreferrer">Color Schemes (d3-scale-chromatic)</a></li><li><a href="https://github.com/d3/d3-scale-chromatic" target="_blank" rel="noopener noreferrer">d3-scale-chromatic</a>（非官方<a href="https://github.com/xswei/d3-scale-chromatic" target="_blank" rel="noopener noreferrer">中译版</a>）</li><li><a href="https://medium.com/@mbostock/introducing-d3-scale-61980c51545f" target="_blank" rel="noopener noreferrer">Introducing d3-scale</a></li><li><a href="https://alignedleft.com/tutorials/d3/scales" target="_blank" rel="noopener noreferrer">Scales</a>（<a href="http://pkuwwt.github.io/d3-tutorial-cn/scales.html" target="_blank" rel="noopener noreferrer">中译版</a>）⚠️ 文章基于 D3.js v3.x 版本</li><li><a href="https://medium.com/@mbostock/introducing-d3-scale-61980c51545f" target="_blank" rel="noopener noreferrer">Introducing d3-scale</a></li><li><a href="https://jckr.github.io/blog/2011/08/11/d3-scales-and-color/" target="_blank" rel="noopener noreferrer">d3: scales, and color.</a></li></ul><p>本文主要介绍 <mark><a href="https://github.com/d3/d3/blob/main/API.md#scales-d3-scale" target="_blank" rel="noopener noreferrer">Scales</a> 模块</mark>。</p><p>Jacques Bertin 在《Semiology of Graphics》中描述了<strong>图形符号的不同属性</strong>（例如位置、尺寸、颜色等）在展示<strong>数据</strong>时的适用性。而将两者联系起来的关键是<strong>比例尺</strong>，它将数据（某个维度）按照一定的规则映射到图形符号的（某个特定）属性上，这样就可以使用具体可视的图形符号表示抽象的数据了。</p><p>比例尺实际是将一个类型的数据<strong>转换</strong>为另一个数据的<strong>规则方法</strong>，例如通过<strong>线性比例尺</strong>，将将一年的每月的收益转换为条形图在 Y 坐标轴的高度值。D3 在模块 <a href="https://github.com/d3/d3-scale" target="_blank" rel="noopener noreferrer">d3-scale</a> 中提供了多种类型的比例尺，适用于将不同类型的抽象数据转换为图形符号的不同属性。</p><p>💡 在 D3 说明文档中，将输入数据的范围称为<strong>定义域 <code>domain</code></strong>，转换后输出数据的范围称为<strong>值域 <code>range</code></strong></p><p>💡 通过以下介绍的各方法创建相应的比例尺，然后可以使用各种比例尺所提供的方法对比例尺进行定制，一般比例尺的方法还是<strong>返回比例尺本身，可以进行链式调用</strong></p><hr><p>以下比例尺适用于定义域为连续型</p><h2 id="连续型比例尺-continuous-scales" tabindex="-1"><a class="header-anchor" href="#连续型比例尺-continuous-scales" aria-hidden="true">#</a> 连续型比例尺 Continuous Scales</h2><p>连续型比例尺 Continuous Scales 用于<mark>将连续型的定义域映射到连续型的值域</mark></p><p>该类型的比例尺（以下的 <code>continuous</code>）的常用方法：</p><ul><li><p><code>continuous.domain(domainArr)</code> 设置或返回定义域。如果没有传递参数，则返回当前比例尺的定义域；如果传递数组，则将定义域范围设置为该数组。</p><p>💡 一般传递的数组必须包含两个元素，<strong>而且元素的类型是数值</strong>。如果数组的元素有多个（元素依此是递增或递减的），则可以创建映射关系更复杂的比例尺。⚠️ 如果定义域 domain 数组长度 <code>M</code> （元素个数）和值域 range 数组长度 <code>N</code>（元素个数） <strong>不同</strong>，则映射的关系按照 <code>min(N, M)</code> 构建，超出范围的无法进行转换</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建一个线性比例尺</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 定义域是 -1 到 1，其中 -1 到 0 是一部分（负值），0 到 1 是另一部分（正值）</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 负值映射的值域是从红色渐变到白色的 rgb 值；正值映射的值域是从白色渐变到绿色的 rgb 值</span>

<span class="token function">color</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;rgb(255, 128, 128)&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;rgb(128, 192, 128)&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li><li><p><code>continuous.range(rangeArr)</code> 设置或返回值域。在传递数组设置值域时，数组的元素不必是数值，只要是<strong>插值器</strong><a href="https://github.com/d3/d3-interpolate#interpolate" target="_blank" rel="noopener noreferrer">支持的类型</a>就可以，例如颜色值。⚠️ 如果希望比例尺支持 <code>continuous.invert(value)</code> 则值域的类型需要是数值。</p><p>💡 如果希望同时设置值域和插值方法为 <code>d3.interpolateRound</code>（通过四舍五入插入整数），可以使用 <code>continuous.rangeRound(rangeArr)</code>，那么此时传递的数组的元素类型只能是数值</p></li><li><p><code>continuous(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应的值域 range 的值</p></li><li><p><code>continuous.invert(value)</code> 向比例尺传递一个值域的 range 的值，<strong>反过来得到定义域 domain 的值</strong>。这对于交互很有用，例如根据鼠标在图表的位置，反向求出并显式对应的数据。⚠️ 该方法只支持值域为数值类型的比例尺，否则返回 <code>NaN</code></p></li><li><p><code>continuous.clamp(clampState)</code> 当 <code>continuous(value)</code> 或 <code>continuous.invert(value)</code> 入参值<strong>超出定义域（或值域）的范围</strong>时，比例尺的行为会根据 <code>clamp</code> 而定。</p><ul><li>如果开启 clamping 夹具功能 <code>clampState=true</code>，比例尺返回的值会限制在相应范围内</li><li>如果不开启 clamping 夹具功能 <code>clampState=false</code>，比例尺会<strong>进行推断</strong>得出超出范围的值</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> x <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">960</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 默认不开启 clamping 夹具功能</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -160 超出值域范围</span>
x<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -10 超出定义域范围</span>

<span class="token comment">// 开启 clamping 夹具功能</span>
x<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 结果被限制在值域中</span>
x<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10 结果被限制在定义域中</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p><code>continuous.unknown(value)</code> 设置当比例尺接受的入参为 <code>undefined</code> 或 <code>NaN</code> 时，应该返回的值。这对于数据集中存在部分缺失时很有用（当然最好是在数据清洗中进行处理），可以将数据项映射到一个特定的可视化属性值</p></li><li><p><code>continuous.nice()</code> 编辑定义域的范围，通过四舍五入使其两端的值更「整齐」nice，例如对于定义域的原本范围是 <code>[0.201479…, 0.996679…]</code> 可以扩展为 <code>[0.2, 1.0]</code></p></li><li><p><code>continuous.interpolate(interpolate)</code> 自定义值域的插值函数</p></li></ul><h3 id="线性比例尺-linear-scales" tabindex="-1"><a class="header-anchor" href="#线性比例尺-linear-scales" aria-hidden="true">#</a> 线性比例尺 Linear Scales</h3><p>线性比例尺 Linear Scales 值域中的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 与定义域中的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 通过<mark>表达式 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 联系起来</mark>，这种映射方式可以在视觉元素的变量中保留数据的原始差异比例</p><p>使用方法 <code>d3.scaleLinear(domain, range)</code> 构建一个线性比例尺，入参是可选的，如果忽略则定义域和值域范围默认是 <code>[0, 1]</code>，也可以在之后通过 <code>continuous.domain(value)</code> 和 <code>continuous.range(value)</code> 设置定义域和值域。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> x <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">960</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;brown&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;steelblue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 等价的方法 <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token keyword">const</span> x <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">960</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">x</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 80</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 320</span>

<span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;brown&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;steelblue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;#9a3439&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;#7b5167&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>💡 恒等比例尺 Identity Scales 是线性比例尺的一种特例，其定义域和值域相同，使用方法 <code>d3.scaleIdentity(range)</code> 构建</p><h3 id="幂比例尺-power-scales" tabindex="-1"><a class="header-anchor" href="#幂比例尺-power-scales" aria-hidden="true">#</a> 幂比例尺 Power Scales</h3><p>幂比例尺 Power Scales 会对定义域的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 进行幂运算，再<mark>与值域中的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 联系起来 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></mark>，其中 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 是幂</p><p>使用方法 <code>const pow = d3.scalePow(domain, range)</code> 构建一个幂比例尺，默认的幂为 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>（此时是线性比例尺）</p><p>使用比例尺方法 <code>pow.exponent(k)</code> 用来设置幂</p><p>💡 幂比例尺 <code>pow(value)</code> 可以接受负值的输入，此时入参的值和转换后得到的值都会乘以 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></p><p>💡 D3 还提供了一个方法 <code>d3.scaleSqrt(domain, range)</code> 方便地生成幂为 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.5</span></span></span></span> 的幂比例尺，等价于以下生成的幂比例尺</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>d3<span class="token punctuation">.</span><span class="token function">scalePow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exponent</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="对数比例尺-log-scales" tabindex="-1"><a class="header-anchor" href="#对数比例尺-log-scales" aria-hidden="true">#</a> 对数比例尺 Log Scales</h3><p>对数比例尺 Log Scales 会对定义域的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 进行对数运算，再<mark>与值域中的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> 联系起来 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></mark></p><p>⚠️ 由于对数的限制 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">∞</span></span></span></span>，对数比例尺的定义限范围是正值。如果需要支持负值，则需要对该比例尺进行封装，<strong>显式</strong>地对入参值和输出值都乘以 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 进行预转换</p><p>使用方法 <code>const log = d3.scaleLog(domain, range)</code> 构建一个对数比例尺，默认以 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">10</span></span></span></span> 作为底数</p><p>使用比例尺方法 <code>log.base(N)</code> 用来设置底数</p><p>💡 类似地，D3 还提供<a href="https://github.com/d3/d3-scale#symlog-scales" target="_blank" rel="noopener noreferrer">双对称的对数比例尺 Symlog Scale</a>s <code>d3.scaleSymlog(domain, range)</code></p><h3 id="径向比例尺-radial-scales" tabindex="-1"><a class="header-anchor" href="#径向比例尺-radial-scales" aria-hidden="true">#</a> 径向比例尺 Radial Scales</h3><p>径向比例尺 Radial Scales 是线性比例尺的一种变体，它<mark>将定义域的值与值域的值的<strong>平方</strong>构成线性关系</mark>，例如在径向条形图将数据映射为半径，而页面展示的图形元素则是面积</p><p>使用方法 <code>d3.scaleRadial(domain, range)</code> 构建一个径向比例尺</p><h3 id="时间比例尺-time-scales" tabindex="-1"><a class="header-anchor" href="#时间比例尺-time-scales" aria-hidden="true">#</a> 时间比例尺 Time Scales</h3><p>时间比例尺 Time Scales 是线性比例尺的一种变体，<mark>它以时间对象 Date 作为定义域</mark></p><p>使用方法 <code>d3.scaleTime(domain, range)</code> 构建一个时间比例尺，如果省略 <code>domain</code> 则默认定义域为 <code>[2000-01-01, 2000-01-02]</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> x <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">960</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 640</span>
x<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sat Jan 01 2000 05:00:00 GMT-0800 (PST)</span>
x<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Sat Jan 01 2000 16:00:00 GMT-0800 (PST)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="顺序比例尺-sequential-scales" tabindex="-1"><a class="header-anchor" href="#顺序比例尺-sequential-scales" aria-hidden="true">#</a> 顺序比例尺 Sequential Scales</h2><p>它和连续型比例尺类似，也是将连续型的定义域映射到连续型的值域，但该比例尺的<mark>值域一般是指定一个插值器</mark></p><p>使用方法 <code>const sequential = d3.scaleSequential(domain, interpolator)</code> 构建一个顺序比例尺，如果值域的插值器省略，则默认使用<strong>恒等函数 identity function</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> rainbow <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleSequential</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>interpolateRainbow<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 如果值域/插值器是两个元素构成的数组，表示插值的范围，D3 会调用<a href="https://github.com/d3/d3-interpolate" target="_blank" rel="noopener noreferrer">方法 <code>d3.interpolate()</code></a> 将它转换为一个插值器</p><p>该比例尺（以下的 <code>sequential</code>）除了有连续型比例尺的常用方法以外，还有一些不同的方法：</p><ul><li><code>sequential.interpolator(interpolator)</code> 设置比例尺的插值器</li><li><code>sequential.range(rangeArr)</code> 设置插值的范围，D3 会将它转换为一个插值器</li></ul><p>💡 和连续型比例尺类似，顺序比例尺有一些衍生的比例尺，可以先对定义域的值进行幂、对数等运算，进行转换后再传递给插值器处理</p><ul><li><code>d3.scaleSequentialLog(domain, interpolator)</code> 和 <code>d3.scaleSequentialSqrt(domain, interpolator)</code></li><li><code>d3.scaleSequentialPow(domain, interpolator)</code> 和 <code>d3.scaleSequentialSymlog(domain, interpolator)</code></li><li><code>d3.scaleSequentialQuantile(domain, interpolator)</code> 和分位数型比例尺类似</li></ul><h2 id="发散比例尺-diverging-scales" tabindex="-1"><a class="header-anchor" href="#发散比例尺-diverging-scales" aria-hidden="true">#</a> 发散比例尺 Diverging Scales</h2><p>它和连续型比例尺类似，也是将连续型的定义域映射到连续型的值域，但该比例尺的<mark>定义域一般是由三个元素组成的数组，值域一般是指定一个插值器</mark></p><p>使用方法 <code>const diverging= d3.scaleDiverging(domain, interpolator)</code> 构建一个发散比例尺，如果没有设置定义域，默认值为 <code>[0, 0.5, 1]</code>；如果没有设定插值器，则默认使用<strong>恒等函数 identity function</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> spectral <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleDiverging</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>interpolateSpectral<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="分层比例尺-quantize-scale" tabindex="-1"><a class="header-anchor" href="#分层比例尺-quantize-scale" aria-hidden="true">#</a> 分层比例尺 Quantize Scale</h2><p>分层比例尺 Quantize Scale 用于将连续型的定义域映射到离散型值域，一般 <mark>通过四舍五入等<strong>修约</strong></mark> 的方法将数据进行分层转换映射，以便将数据进行归类区分。</p><p><strong>定义域的范围</strong>会根据离散型值域中可取值的数量<strong>划分为等距的片段</strong>，即每一个值域中离散值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span>，都可以代表一段定义域范围 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mspace"> </span><span class="mord mathnormal">ro</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span>，例如<a href="https://observablehq.com/@d3/choropleth" target="_blank" rel="noopener noreferrer">等值域图/分级统计地图</a></p><p>使用方法 <code>d3.scaleQuantize(domain, range)</code> 构建一个分层比例尺，如果省略了定义域或值域，则它默认范围是 <code>[1, 0]</code>，其作用就等价于 <code>Math.round</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleQuantize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;brown&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;steelblue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">0.49</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;brown&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">0.51</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;steelblue&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>该类型的比例尺（以下的 <code>quantize</code>）的常用方法：</p><ul><li><p><code>quantize.domain(domainArr)</code> 设置定义域，数组由两个元素组成一个范围，而且元素的类型是数值，<strong>而且按升序排列</strong></p></li><li><p><code>quantize.range(rangeArr)</code> 设置值域，数组包含一些列离散的值</p></li><li><p><code>quantize(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应的值域 range 的值</p></li><li><p><code>quantize.invertExtent(value)</code> 向比例尺传递一个值域的 range 的值，<strong>反过来得到定义域 domain 对应的片段</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> width <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleQuantize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

width<span class="token punctuation">.</span><span class="token function">invertExtent</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [40, 70]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><code>quantize.nice()</code></p></li></ul><h2 id="分位数比例尺-quantile-scales" tabindex="-1"><a class="header-anchor" href="#分位数比例尺-quantile-scales" aria-hidden="true">#</a> 分位数比例尺 Quantile Scales</h2><p>分位数型比例尺 Quantile Scales 将输入的数据作为总体（一堆通过采样获取的离散值），这样就<strong>可以接受在该总体范围中的任意值输入（即定义域是连续型）</strong>，可以计算出它在总体中的分位数，然后<mark>基于分位数</mark>再找出在值域中一些列<strong>离散值</strong>中的那个对应值。</p><p>使用方法 <code>d3.scaleQuantile(domain, range)</code> 构建一个分位数比例尺</p><p>该类型的比例尺（以下的 <code>quantile</code>）的常用方法：</p><ul><li><p><code>quantile.domain(domainArr)</code> 设置定义域，数组由一堆通过采样获取的离散值，而且元素的类型是数值，然后 D3 会对数组进行拷贝并对元素进行排序，作为总体用于计算分位数</p></li><li><p><code>quantile.range(rangeArr)</code> 设置值域，数组包含一些列离散的值</p></li><li><p><code>quantile(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应的值域 range 的值</p></li><li><p><code>quantile.invertExtent(value)</code> 向比例尺传递一个值域的 range 的值，<strong>反过来得到定义域 domain 对应的片段</strong></p></li><li><p><code>quantile.quantiles()</code> 根据值域 range 的离散值数量 <code>n</code>，对分位数进行分段，再根据各段的分位数可以计算出对应的定义域的 domain 的值，该方法就是返回 <code>n-1</code> 个阈值构成的数组。</p></li></ul><h2 id="阈值比例尺-threshold-scales" tabindex="-1"><a class="header-anchor" href="#阈值比例尺-threshold-scales" aria-hidden="true">#</a> 阈值比例尺 Threshold Scales</h2><p>阈值比例尺 Threshold Scales 和分层型比例尺 Quantize Scale 类似，<mark>不过映射规则更自由，定义域数组中各元素是<strong>阈值</strong>，可以更灵活地对定义域进行任意的划分</mark>，然后 D3 将<strong>各段定义域</strong>分别映射到<strong>值域各个离散值</strong></p><p>使用方法 <code>d3.scaleThreshold(domain, range)</code> 构建一个阈值比例尺</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">color</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &quot;red&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;white&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;white&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;green&quot;</span>
<span class="token function">color</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;green&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>该类型的比例尺（以下的 <code>threshold</code>）的常用方法：</p><ul><li><code>threshold.domain(domainArr)</code> 设置定义域，数组由一系列阈值组成，然后元素按升序排列</li><li><code>threshold.range(rangeArr)</code> 设置值域，数组包含一些列离散的值</li></ul><p>⚠️ 如果值域离散值数量是 <code>N+1</code>，则定义域数组中的阈值数量需要是 <code>N</code>。如果阈值数量少于期望的值，则相应的值域离散值会被忽略；如果阈值的数量多于期望的值，则在调用阈值比例尺时可能返回 <code>undefined</code>，因为在值域没有相应的离散值与该段定义域相对应。</p><ul><li><p><code>threshold(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应的值域 range 的值</p></li><li><p><code>threshold.invertExtent(value)</code> 向比例尺传递一个值域的 range 的值，<strong>反过来得到定义域 domain 对应的片段</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> color <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleThreshold</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

color<span class="token punctuation">.</span><span class="token function">invertExtent</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [undefined, 0]</span>
color<span class="token punctuation">.</span><span class="token function">invertExtent</span><span class="token punctuation">(</span><span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, 1]</span>
color<span class="token punctuation">.</span><span class="token function">invertExtent</span><span class="token punctuation">(</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, undefined]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><hr><p>以下比例尺适用于定义域为离散型</p><h2 id="排序比例尺-ordinal-scales" tabindex="-1"><a class="header-anchor" href="#排序比例尺-ordinal-scales" aria-hidden="true">#</a> 排序比例尺 Ordinal Scales</h2><p>排序比例尺 Ordinal Scales 用于将有序 ordinal/ordered 或无序 categorical/unordered 的<mark>离散型的定义域映射到离散型值域</mark>，例如将一系列类别名称，映射到不同的颜色中</p><p>使用方法 <code>d3.scaleOrdinal(domain, range)</code> 构建一个排序比例尺</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ordinal <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleOrdinal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;B&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;A&quot;</span>
<span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;B&quot;</span>
<span class="token function">ordinal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;C&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>该类型的比例尺（以下的 <code>ordinal</code>）的常用方法：</p><ul><li><p><code>ordinal.domain(domainArr)</code> 设置定义域，数组的第一个元素映射到值域的第一个元素，依此类推（如果定义域数量多于值域，就进行**「循环」映射**）。D3 通过 Map 对象将各元素作为键与它们的<strong>索引</strong>进行匹配，再利用该索引获取值域的数组中相应的值，以此实现定义域和值域的映射。⚠️ 因此定义域的数组元素需要是**<a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener noreferrer">原始类型</a>**，它们需要作为 Map 对象的键，而且每个元素应该是唯一的</p></li><li><p><code>ordinal.range(rangeArr)</code> 设置值域，数组的第一个元素映射到定义域的第一个元素，依此类推。如果值域的数组长度小于定义域的数组长度，则值域的元素会被从头重复使用进行映射，即进行**「循环」映射**。</p></li><li><p><code>ordinal(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应的值域 range 的值。如果传入的值不在定义域中，则返回 <code>unknown</code></p><ul><li>如果 <code>unknown</code> 的值是 <code>implicit</code>（默认值，即 <code>d3.scaleImplicit</code>，是一个 Symbol 值），则该入参会**「隐式地」自动添加到定义域 domain 数组中**，并返回值域中相应的离散值</li><li>可以使用方法 <code>ordinal.unknown(value)</code> 替代 <code>unknow</code> 的默认值，则返回的值就是固定为 <code>value</code></li></ul></li></ul><h3 id="带状比例尺-band-scales" tabindex="-1"><a class="header-anchor" href="#带状比例尺-band-scales" aria-hidden="true">#</a> 带状比例尺 Band Scales</h3><p>带状比例尺 Band Scales 和排序比例尺类似，虽然定义域和离散的值域元素也是按索引依此对映的，<mark>但是值域的各值表示一个个连续区间</mark>。</p><p>该比例尺根据定义域数组的元素数量，将值域的范围分割为等距的各段，得到的每个值就表示相应的区间，其可视化效果就是一个个宽度相同的带状，该比例尺一般用于柱状图。</p><p><img src="/blog-data/assets/band-scales.e944fed4.png" alt="band scales"></p><p>使用方法 <code>d3.scaleBand(domain, range)</code> 构建一个带状比例尺</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> band <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleBand</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;four&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>该类型的比例尺（以下的 <code>band</code>）的常用方法：</p><ul><li><p><code>band.domain(domainArr)</code> 设置定义域，数组的第一个元素映射到值域的第一个元素，依此类推。⚠️ 定义域数组的元素也需要是**<a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener noreferrer">原始类型</a>**</p></li><li><p><code>band.range(rangeArr)</code> 设置值域，它是一个数组，<strong>有两个元素</strong>指定整体范围（默认值是 <code>[0, 1]</code>），因此元素的类型是数值。D3 会根据定义域数值的元素数量，将值域的范围分割为等距的各段。</p></li><li><p><code>band.rangeRound(rangeArr)</code> 用于设定值域整体范围，并对两端进行四舍五入的<strong>修约</strong>，让两端的值为整数，使值域更适合可视化。该方法等价于以下操作</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>band<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>range<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>💡 如果值域范围不是定义域的数组元素的数量的整数倍，那么即使没有设置间隔 padding，最后生成的带状也会有外间隔，可以通过方法 <code>band.align(alignValue)</code> 来设置外间隔的分布</p></li><li><p><code>band(value)</code> 向比例尺传递一个定义域 domain 的值，返回相应区间的<strong>起始值</strong>。如果输入的值不在定义域中，则返回 <code>undefined</code></p></li><li><p><code>band.padding(padding)</code> 设定值域的内外间隔，入参的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 表示间隔占据区间的比例大小</p><p>💡 如果希望分别设置各区间之间的间隔和值域两端的间隔，可以分别使用方法 <code>band.paddingInner(padding)</code> 和方法 <code>band.paddingOuter(padding)</code></p></li><li><p><code>band.align(alignValue)</code> 入参的值 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 用以设置外间隔的分布方式。如果 <code>align=0.5</code>（默认值）则两外侧的间隔相同，即这些 bands 居中，如果 <code>align=0</code> 或 <code>align=1</code> 则它们会向一侧偏移。</p></li><li><p><code>band.bandwidth()</code> 返回 band 的宽度，不包含 padding</p></li><li><p><code>band.step()</code> 返回「步长」，即 band 的宽度和 padding 的宽度之和</p></li></ul><h3 id="点状比例尺-point-scales" tabindex="-1"><a class="header-anchor" href="#点状比例尺-point-scales" aria-hidden="true">#</a> 点状比例尺 Point Scales</h3><p>点状比例尺 Point Scales 和带状比例尺类似，就像是将 band 的宽度设置为 <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p><p>该比例尺将根据<mark>定义域数组的离散元素的数量，<strong>将值域的范围分割为等距的各段</strong>，各个<strong>分隔点</strong>与定义域中的离散元素依此映射</mark>，该比例尺一般用于散点图。</p><p><img src="/blog-data/assets/points-scales.3ed4e313.png" alt="point scales"></p><p>使用方法 <code>d3.scalePoint(domain, range)</code> 构建一个点状比例尺</p><p>该类型的比例尺的常用方法和带状比例尺类似</p><h2 id="坐标轴" tabindex="-1"><a class="header-anchor" href="#坐标轴" aria-hidden="true">#</a> 坐标轴</h2><p>比例尺模块只是提供了各种数据转换的规则方法，并不能生成视觉元素，一般会搭配坐标轴 <a href="https://github.com/d3/d3-axis" target="_blank" rel="noopener noreferrer">d3-axis</a> 模块使用，该模块可以<strong>基于比例尺 scale 在页面生成相应的坐标轴</strong>。</p><p>💡 在构建坐标轴时，推荐<strong>为容器的四周设置一个 <a href="https://observablehq.com/@d3/margin-convention" target="_blank" rel="noopener noreferrer">margin 区域</a></strong>，以便放置坐标轴等注释信息，而中间的「安全区域」才放置主要的可视化图表内容。</p><p>可以使用以下 4 种方法构建不同反向的坐标轴（其中参数 <code>scale</code> 是生成坐标轴时所使用的比例尺）</p><ul><li><code>d3.axisTop(scale)</code> 生成一个朝上的坐标轴，即其刻度在水平轴线的上方</li><li><code>d3.axisBottom(sacle)</code> 生成一个朝下的坐标轴，即其刻度在水平轴线的下方</li><li><code>d3.axisRight(scale)</code> 生成一个朝右的坐标轴，即其刻度在竖直轴线的右方</li><li><code>d3.axisLeft(scale)</code> 生成一个朝左的坐标轴，即其刻度在竖直轴线的左方</li></ul><p>💡 虽然生成的坐标轴<strong>方向不同</strong>，但**「起点」相同**，即坐标轴开始的一端都是其所在的容器的原点 origin，还需要为坐标轴（或其所在的容器）设置 <strong><code>transform</code> 属性</strong>，把坐标轴 <code>translate</code> 移动到合适的位置。</p><p>D3 构建出来的坐标轴是有一系列 SVG 元素构成：</p><ul><li>轴线由 <code>&lt;path&gt;</code> 路径元素构成，它带有类名 <code>domain</code></li><li>刻度是和刻度值分别由元素 <code>&lt;line&gt;</code> 和 <code>&lt;text&gt;</code> 构成。每一刻度和相应的刻度值都包裹在一个 <code>&lt;g&gt;</code> 元素中，它带有类名 <code>tick</code></li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 渲染在页面上的坐标轴模板 --&gt;</span>
<span class="token comment">&lt;!-- 一般会使用一个 g 元素包裹坐标轴的所有元素，便于对整体设置样式，例如 transform --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">font-family</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sans-serif<span class="token punctuation">&quot;</span></span> <span class="token attr-name">text-anchor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>middle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>M0.5,6V0.5H880.5V6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(0.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(176.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(352.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(528.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(704.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>0.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">opacity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>translate(880.5,0)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>line</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">dy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.71em<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>使用以上 4 种方法之一构建出来的坐标轴对象 <code>axis</code> ，也是一个方法，它接受一个 SVG 元素 <code>axis(context)</code> <strong>将坐标轴在其内部渲染出来</strong>。</p><p>💡 但是在官方样例的一些代码中，一般<a href="https://observablehq.com/@d3/learn-d3-scales?collection=@d3/learn-d3#cell-3899" target="_blank" rel="noopener noreferrer">使用 <code>selection.call(axis)</code> 的方式</a>来调用坐标轴方法，其中 <code>selection</code> 是指选择集，一般是一个 <code>&lt;g&gt;</code> 元素；<code>axis</code> 是坐标轴对象。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>axis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这一段代码的关键是<strong>选择集的<a href="https://github.com/d3/d3-selection/tree/v3.0.0#selection_call" target="_blank" rel="noopener noreferrer">方法 <code>selection.call(function, otherArguments...)</code></a></strong>，类似 JS 的原生<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call" target="_blank" rel="noopener noreferrer">方法 <code>call</code></a>，它接受多个入参，其中<strong>第一个参数是需要执行的目标函数</strong>，之后的参数就是需要传递给目标函数的一些参数，其<a href="https://github.com/d3/d3-selection/blob/main/src/selection/call.js" target="_blank" rel="noopener noreferrer">源码</a>如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>比较特别的是在 <code>call()</code> 方法内部，替换了 <code>arguments</code> 的第一个元素，改为当前选择集，相当于将选择集和 <code>otherArguments</code> 整合为系列参数，再传递给目标函数。该方法相当于执行了给定的函数，<strong>但是返回值的依然是当前的选择集</strong>，这样便于之后的链式调用。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">selection<span class="token punctuation">,</span> first<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  selection
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;first-name&quot;</span><span class="token punctuation">,</span> first<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;last-name&quot;</span><span class="token punctuation">,</span> last<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Snow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等价以下的操作</span>
<span class="token function">name</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Snow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>坐标轴对象（以下的 <code>axis</code>）还有一些常用方法：</p><ul><li><p><code>axis.scale([scale])</code> 如果传递了参数，基于新的比例尺生成新的坐标轴；如果没有传递参数，返回当前的坐标轴</p></li><li><p><code>axis.ticks(arguments…)</code> 或 <code>axis.tickArguments([arguments])</code> 设置坐标轴的刻度间隔和刻度值的格式，不同类型的比例尺可以传递不同的参数，一般是设定刻度的数量 <code>count</code>（或对于时间比例尺是<a href="https://github.com/d3/d3-time" target="_blank" rel="noopener noreferrer">时间间隔 <code>interval</code></a>）和刻度值的<a href="https://github.com/d3/d3-format" target="_blank" rel="noopener noreferrer">格式 <code>specifier</code></a></p><p>💡 该方法对于无法提供 <code>scale.ticks</code> 的比例尺无效，例如带状比例尺和点状比例尺</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 时间坐标轴上，每隔 15 分钟设定一个刻度</span>
axis<span class="token punctuation">.</span><span class="token function">ticks</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>timeMinute<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
axis<span class="token punctuation">.</span><span class="token function">tickArguments</span><span class="token punctuation">(</span><span class="token punctuation">[</span>d3<span class="token punctuation">.</span>timeMinute<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><code>axis.tickValues([values])</code> 如果传递了数组，则用该数组的元素覆盖比例尺自动生成的刻度值；如果 <code>values=null</code> 则清除之前设置的刻度值，并使用比例尺自动生成的刻度值；如果没有传递参数，则返回当前的刻度值（默认值是 <code>null</code>，则使用比例尺自动生成的刻度值）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>scale<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">tickValues</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p><code>axis.tickFormat([format])</code> 设定刻度值的<a href="https://github.com/d3/d3-format" target="_blank" rel="noopener noreferrer">格式</a>（<a href="https://github.com/d3/d3-time-format" target="_blank" rel="noopener noreferrer">时间格式</a>）</p></li><li><p><code>axis.tickSize([size])</code> 设定内侧刻度和外侧刻度的长度，默认值是 <code>6</code></p><p>内侧刻度和外侧刻度不同，内侧刻度是一个个单独的 <code>line</code> 元素，而外侧刻度是坐标轴最外侧两端的刻度线，它是轴线 <code>path</code> 元素的一部分。</p></li><li><p><code>axis.tickSizeInner([size])</code> 和 <code>axis.tickSizeOuter([size])</code> 分别设置内侧刻度和外侧刻度的长度</p></li><li><p><code>axis.tickPadding([padding])</code> 设置刻度线和刻度文本之间的间距，默认值是 <code>3</code> 像素</p></li><li><p><code>axis.offset([offset])</code> 设置坐标轴的偏移，默认值是 <code>0</code></p></li></ul><hr><p>从比例尺构建坐标轴的一般流程：</p><ul><li>基于抽象数据和图形符号的属性构建合适比例尺</li><li>基于比例尺构建特定反向的坐标轴</li><li>将坐标轴添加到页面上</li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/12/7 上午4:10:04</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-data/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-data/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-data/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-data/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-data/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-data/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-data/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-data/assets/app.a4413a59.js" defer></script>
  </body>
</html>
