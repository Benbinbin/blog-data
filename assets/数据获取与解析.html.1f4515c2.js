import{c as n}from"./app.a4413a59.js";import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";const a={},s=n(`<h1 id="\u6570\u636E\u83B7\u53D6\u4E0E\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u83B7\u53D6\u4E0E\u89E3\u6790" aria-hidden="true">#</a> \u6570\u636E\u83B7\u53D6\u4E0E\u89E3\u6790</h1><p>\u53C2\u8003\uFF1A</p><ul><li><a href="https://observablehq.com/@d3/learn-d3-data?collection=@d3/learn-d3" target="_blank" rel="noopener noreferrer">Learn D3: Data</a></li><li><a href="https://github.com/d3/d3/blob/main/API.md#fetches-d3-fetch" target="_blank" rel="noopener noreferrer">Fetches (d3-fetch)</a>\uFF08\u975E\u5B98\u65B9<a href="https://github.com/xswei/d3-fetch" target="_blank" rel="noopener noreferrer">\u4E2D\u8BD1\u7248</a>\uFF09</li><li><a href="https://github.com/d3/d3-dsv" target="_blank" rel="noopener noreferrer">d3-dsv</a>\uFF08\u975E\u5B98\u65B9<a href="https://github.com/xswei/d3-dsv" target="_blank" rel="noopener noreferrer">\u4E2D\u8BD1\u7248</a>\uFF09</li><li><a href="https://github.com/d3/d3/blob/main/API.md#time-formats-d3-time-format" target="_blank" rel="noopener noreferrer">Time Formats (d3-time-format)</a></li></ul><p>\u672C\u6587\u4E3B\u8981\u4ECB\u7ECD <mark><a href="https://github.com/d3/d3/blob/main/API.md#fetches-d3-fetch" target="_blank" rel="noopener noreferrer">Fetches</a> \u6A21\u5757</mark>\u3002</p><p>\u8FDB\u884C\u6570\u636E\u53EF\u89C6\u5316\u7684\u7B2C\u4E00\u6B65\u662F\u9700\u8981\u83B7\u53D6\u6570\u636E\uFF0C\u53EF\u4EE5\u4F7F\u7528 JS \u63D0\u4F9B\u7684 File API <a href="https://developer.mozilla.org/en-US/docs/Web/API/FileReader" target="_blank" rel="noopener noreferrer">\u8BFB\u53D6</a>\u7528\u6237\u5728\u8868\u5355 <code>&lt;input type=&quot;file&quot;&gt;</code> \u4E2D\u4E3B\u52A8\u5BFC\u5165\u7684\u672C\u5730\u6587\u4EF6\uFF0C\u6216\u8005\u901A\u8FC7\u53D1\u9001<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" target="_blank" rel="noopener noreferrer">\u7F51\u7EDC\u8BF7\u6C42</a>\u83B7\u53D6\u5728\u7EBF\u6570\u636E\u3002</p><p>D3 \u7684 d3-fetch \u6A21\u5757\u5C01\u88C5\u4E86 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">Fetch API</a>\uFF0C\u9664\u4E86\u53EF\u4EE5\u83B7\u53D6\u5728\u7EBF\u6570\u636E\u4EE5\u5916\uFF0C\u8FD8\u9488\u5BF9\u5E38\u89C1\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u4F8B\u5982 CSV\u3001TSV\u3001JSON\u3001XML \u7B49\uFF0C\u63D0\u4F9B\u5F3A\u5927\u7684\u89E3\u6790\u529F\u80FD\u3002</p><p>\u5728\u6A21\u5757\u4E2D\u63D0\u4F9B\u4EE5\u4E0B\u65B9\u6CD5\uFF1A</p><ul><li><p><code>d3.blob(url, requestInit)</code> \u83B7\u53D6\u4E8C\u8FDB\u5236\u6587\u4EF6\u5E76\u89E3\u6790\u4E3A Blob</p><ul><li>\u7B2C\u4E00\u4E2A\u5165\u53C2\u662F\u6570\u636E\u6587\u4EF6\u7684\u8DEF\u5F84</li><li>\u7B2C\u4E8C\u4E2A\uFF08\u53EF\u9009\uFF09\u53C2\u6570\u662F<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request" target="_blank" rel="noopener noreferrer">\u7F51\u7EDC\u8BF7\u6C42\u7684\u989D\u5916\u914D\u7F6E</a></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> d3<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token string">&quot;/path/to/file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p><code>d3.buffer(url, requestInit) </code> \u83B7\u53D6\u4E8C\u8FDB\u5236\u6587\u4EF6\u5E76\u89E3\u6790\u4E3A ArrayBuffer</p></li><li><p><code>d3.json(url, requestInit)</code> \u83B7\u53D6 JSON \u6587\u4EF6\uFF0C\u5982\u679C\u8FD4\u56DE\u7684\u54CD\u5E94\u72B6\u6001\u7801\u662F <code>204</code> <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/204" target="_blank" rel="noopener noreferrer">No Content</a> \u6216 <code>205</code> <a href="https://developer.mozilla.org/docs/Web/HTTP/Status/205" target="_blank" rel="noopener noreferrer">Reset Content</a> \u5219 Promise \u4F1A resolve <code>undefined</code></p></li><li><p><code>d3.text(url, requestInit)</code> \u83B7\u53D6\u6587\u672C\u6587\u4EF6</p></li><li><p><code>d3.dsv(delimiter, url, requestInit, row)</code> \u83B7\u53D6 DSV \u6587\u4EF6</p><p>\u{1F4A1} DSV \u662F Delimiter Separated Values \u7684\u7B80\u79F0\uFF0C\u662F\u4E00\u7C7B\u6587\u4EF6\u683C\u5F0F\u7684\u7EDF\u79F0\uFF0C\u5728\u8FD9\u4E9B\u6587\u4EF6\u5B58\u50A8\u7740\u4E8C\u7EF4\u6570\u636E\uFF0C\u6BCF\u4E00\u884C\u662F\u4E00\u4E2A\u6570\u636E\u9879\uFF0C\u6BCF\u4E2A\u6570\u636E\u9879\u4E2D\u5404\u503C\u4E4B\u95F4\u4F7F\u7528<strong>\u7279\u5B9A\u7684\u7B26\u53F7\u5206\u9694</strong>\uFF0C\u4F8B\u5982 <code>.csv</code> \u540E\u7F00\u7684\u6587\u4EF6\u4F7F\u7528\u9017\u53F7\u5206\u9694 <a href="https://en.wikipedia.org/wiki/Comma-separated_values" target="_blank" rel="noopener noreferrer">Comma-separated values</a>\uFF0C<code>.tsv</code> \u540E\u7F00\u7684\u6587\u4EF6\u4F7F\u7528 Tab \u952E\uFF08\u5236\u8868\u952E\uFF09\u5206\u9694 <a href="https://en.wikipedia.org/wiki/Tab-separated_values" target="_blank" rel="noopener noreferrer">Tab-separated values</a></p><ul><li><p>\u7B2C\u4E00\u4E2A\u5165\u53C2\u662F\u6307\u5B9A\u5206\u9694\u7B26</p></li><li><p>\u7B2C\u4E8C\u4E2A\u5165\u53C2\u662F\u6570\u636E\u6587\u4EF6\u7684\u8DEF\u5F84</p></li><li><p>\u7B2C\u4E09\u4E2A\uFF08\u53EF\u9009\uFF09\u53C2\u6570\u662F\u4E00\u4E2A\u5BF9\u8C61\uFF0C\u7528\u4EE5\u8BBE\u7F6E\u7F51\u7EDC\u8BF7\u6C42\u7684\u989D\u5916\u914D\u7F6E</p></li><li><p>\u7B2C\u56DB\u4E2A\uFF08\u53EF\u9009\uFF09\u53C2\u6570\u662F\u662F\u4E00\u4E2A\u51FD\u6570\uFF0C<strong>\u884C\u6570\u636E\u8F6C\u6362\u548C\u7B5B\u9009\u51FD\u6570</strong>\u3002 <mark>\u5982\u679C\u6CA1\u6709\u6307\u5B9A\u8F6C\u6362\u548C\u7B5B\u9009\u51FD\u6570\uFF0C\u5219\u89E3\u6790\u5F97\u5230\u7684\u6570\u636E\u7684\u503C\u7C7B\u578B\u662F<strong>\u5B57\u7B26\u4E32</strong>\u3002</mark></p><p>\u5165\u53C2\u662F\u6570\u636E\u9879\uFF08\u4F9D\u7136\u4F20\u9012\u4E00\u884C\u6570\u636E\u5230\u51FD\u6570\u4E2D\uFF09\uFF0C\u8BE5\u51FD\u6570\u5C31\u50CF\u4E3A\u6BCF\u4E00\u884C\u7684\u6570\u636E\u5E94\u7528\u6570\u7EC4\u7684 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener noreferrer"><code>map</code> \u51FD\u6570</a>\u548C <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreferrer"><code>filter</code> \u51FD\u6570</a>\uFF0C\u5BF9\u6570\u636E\u8FDB\u884C\u8F6C\u6362\u548C\u7B5B\u9009\uFF0C\u5982\u679C\u8FD4\u56DE <code>null</code> \u6216 <code>undefined</code> \u5219\u8BE5\u884C\u6570\u636E\u5C31\u4F1A\u88AB\u5FFD\u7565\u8DF3\u8FC7</p><p>\u{1F4A1} \u5176\u5B9E\u8BE5\u65B9\u6CD5\u5728\u5185\u90E8\u8C03\u7528\u7684\u662F ==<a href="https://github.com/d3/d3-dsv" target="_blank" rel="noopener noreferrer">d3-dsv \u6A21\u5757</a>==\u6240\u63D0\u4F9B\u7684\u8BF8\u591A\u65B9\u6CD5\uFF08\u8BE5\u6A21\u5757\u4E3B\u8981\u7528\u4E8E<strong>\u89E3\u6790\u548C\u6784\u5EFA DSV \u7C7B\u578B\u6587\u4EF6</strong>\uFF0C\u4F46\u6CA1\u6709\u5C01\u88C5 fetch \u529F\u80FD\uFF09\uFF0C\u4F8B\u5982 <code>dsvFormat(delimiter)</code> \u7528\u4E8E\u6784\u5EFA\u4E00\u4E2A\u901A\u7528\u7684 DSV \u89E3\u6790\u5668\uFF0C\u5B83\u6709\u5F88\u591A\u5B9E\u7528\u65B9\u6CD5\uFF1B<code>d3.csvParse()</code> \u662F\u4E13\u95E8\u7528\u4E8E\u89E3\u6790 CSV \u6570\u636E\u7684\u89E3\u6790\u5668\uFF0C\u7B49\u4EF7\u4E8E <code>d3.dsvFormat(&quot;,&quot;).parse</code>\uFF1B<code>d3.csvFormat()</code> \u662F\u4E13\u95E8\u7528\u4E8E\u6784\u5EFA CSV \u6570\u636E\u7684\u6784\u5EFA\u5668\uFF0C\u7B49\u4EF7\u4E8E <code>dsvFormat(&quot;,&quot;).format</code>\u3002</p><p>\u{1F4A1} \u63A8\u8350\u81EA\u5DF1\u6309\u7167\u6570\u636E\u7684\u7279\u70B9\u548C\u9700\u6C42\u521B\u5EFA<strong>\u8F6C\u6362\u548C\u7B5B\u9009\u51FD\u6570</strong>\uFF0C\u4F46\u663E\u5F0F\u5730\u58F0\u660E\u6570\u636E\u7C7B\u578B\u5728\u5217\u5C5E\u6027\u8F83\u591A\u65F6\u662F\u5F88\u7E41\u7410\u7684\uFF0C\u9700\u8981\u7F57\u5217\u51FA\u5404\u5217\u7684\u6570\u636E\u7C7B\u578B\u3002\u6709\u65F6\u5019\u4E3A\u4E86\u65B9\u4FBF\u4E5F\u53EF\u4EE5\u4F7F\u7528 D3 **<a href="https://github.com/d3/d3-dsv#autoType" target="_blank" rel="noopener noreferrer">\u6570\u636E\u7C7B\u578B\u7684\u81EA\u52A8\u63A8\u65AD</a>**\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u5C06 D3 \u5185\u7F6E\u7684\u8F6C\u6362\u51FD\u6570 <code>d3.autotype</code> \u4F20\u9012\u7ED9 fetch \u6A21\u5757\u6216 d3-dsv \u6A21\u5757\u4E2D\u7684\u76F8\u5E94\u65B9\u6CD5\uFF0C\u4F8B\u5982 <code>d3.dsv(&#39;,&#39;, url, d3.autotype)</code>\u3001<code>d3.csv(url, d3.autotype)</code>\u3001<code>d3.csvParse(d3.autotype)</code>\uFF0C\u8FD9\u6837 D3 \u5C31\u4F1A\u81EA\u52A8\u5C06\u6570\u636E\u4ECE\u5B57\u7B26\u4E32\u7C7B\u578B\u8F6C\u6362\u4E3A\u63A8\u65AD\u7684\u6570\u636E\u7C7B\u578B\u3002\u26A0\uFE0F \u5E94\u8BE5\u53CA\u65F6\u67E5\u770B\u9A8C\u8BC1\u8F6C\u6362\u7ED3\u679C\uFF0C\u56E0\u4E3A\u81EA\u52A8\u7C7B\u578B\u63A8\u65AD\u6709\u53EF\u80FD\u300C<a href="https://observablehq.com/@d3/d3-autotype" target="_blank" rel="noopener noreferrer">\u5931\u7075</a>\u300D\uFF0C\u7279\u522B\u662F\u5BF9\u4E8E\u6570\u636E\u590D\u6742\u7684\u60C5\u51B5\u3002</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> d3<span class="token punctuation">.</span><span class="token function">dsv</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test.csv&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// </span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    year<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token operator">+</span>d<span class="token punctuation">.</span>Year<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// \u5C06\u6570\u636E\u9879\u4E2D Year \u7684\u6570\u636E\u8F6C\u6362\u4E3A JS \u7684 Date \u5BF9\u8C61\u683C\u5F0F</span>
    make<span class="token operator">:</span> d<span class="token punctuation">.</span>Make<span class="token punctuation">,</span> <span class="token comment">// \u5C06\u6570\u636E\u9879\u4E2D Make \u7684\u6570\u636E\u6620\u5C04\u5230\u5C5E\u6027 make</span>
    model<span class="token operator">:</span> d<span class="token punctuation">.</span>Model<span class="token punctuation">,</span> <span class="token comment">// \u5C06\u6570\u636E\u9879\u4E2D Model \u7684\u6570\u636E\u6620\u5C04\u5230\u5C5E\u6027 model</span>
    length<span class="token operator">:</span> <span class="token operator">+</span>d<span class="token punctuation">.</span>Length <span class="token comment">// \u5C06\u6570\u636E\u9879\u4E2D Length \u7684\u6570\u636E\u4ECE\u5B57\u7B26\u4E32\u683C\u5F0F\u8F6C\u6362\u4E3A\u6570\u503C\u5F62\u5F0F</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p><code>d3.csv(url, requestInit, row)</code> \u83B7\u53D6 CSV \u6587\u4EF6\uFF0C\u76F8\u5BF9\u4E8E <code>d3.dsv(&#39;,&#39;, url, init, row)</code></p></li><li><p><code>d3.tsv(url, requestInit, row)</code> \u83B7\u53D6 TSV \u6587\u4EF6\uFF0C\u76F8\u5BF9\u4E8E <code>d3.dsv(&#39;\\t&#39;, url, init, row)</code></p></li><li><p><code>d3.html(url, requestInit)</code> \u83B7\u53D6\u6587\u672C\u6587\u4EF6\uFF0C\u5E76\u89E3\u6790\u4E3A HTML</p></li><li><p><code>d3.image(url, requestInit)</code> \u83B7\u53D6\u56FE\u7247\u6587\u4EF6\uFF0C\u5982\u679C\u5E0C\u671B\u5B9E\u73B0\u533F\u540D\u8DE8\u6E90\u8BF7\u6C42\u53EF\u4EE5\u8FDB\u884C\u5982\u4E0B\u914D\u7F6E</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">await</span> d3<span class="token punctuation">.</span><span class="token function">image</span><span class="token punctuation">(</span><span class="token string">&quot;https://example.com/test.png&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    crossOrigin<span class="token operator">:</span> <span class="token string">&quot;anonymous&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><code>d3.svg(url, requestInit)</code> \u83B7\u53D6\u6587\u672C\u6587\u4EF6\uFF0C\u5E76\u89E3\u6790\u4E3A SVG</p></li><li><p><code>d3.xml(url, requestInit)</code> \u83B7\u53D6\u6587\u672C\u6587\u4EF6\uFF0C\u5E76\u89E3\u6790\u4E3A XML</p></li></ul><p>D3 \u8FD8\u4E13\u95E8\u63D0\u4F9B\u4E86\u4E00\u4E2A\u6A21\u5757 <a href="https://github.com/d3/d3-time-format" target="_blank" rel="noopener noreferrer">d3-time-format</a> \u7528\u4E8E\u89E3\u6790\u548C\u6784\u5EFA\u65F6\u95F4\u6570\u636E\u3002</p><p>\u4E3A\u4E86\u5C06\u65F6\u95F4\u5BF9\u8C61\u683C\u5F0F\u5316\u4E3A\u7279\u5B9A\u7684\u6A21\u5F0F\uFF0C\u9700\u8981\u4F7F\u7528 <code>d3.timeFormat(specifier)</code> \u6784\u5EFA\u4E00\u4E2A\u65F6\u95F4\u683C\u5F0F\u5668\uFF0C\u5165\u53C2 <code>specifier</code> \u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u5B83\u7531\u4E00\u7CFB\u5217<a href="https://github.com/d3/d3-time-format#locale_format" target="_blank" rel="noopener noreferrer">\u4EE5 <code>%</code> \u4E3A\u524D\u7F00\u7684\u6307\u4EE4</a>\u6784\u6210\u3002\u7136\u540E\u4F7F\u7528\u8BE5\u65F6\u95F4\u683C\u5F0F\u5668\u683C\u5F0F\u5316\u65F6\u95F4\u5BF9\u8C61</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> formatTime <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">timeFormat</span><span class="token punctuation">(</span><span class="token string">&quot;%B %d, %Y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// %B \u8868\u793A\u6708\u4EFD\uFF08\u5168\u79F0\uFF09\uFF0C%d \u662F\u4EE5\u6570\u503C\u8868\u793A\u7684\u65E5\uFF0C%Y \u8868\u793A\u5E74</span>
<span class="token function">formatTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2021/11/4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;November 04, 2021&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u4E3A\u4E86\u89E3\u6790\u7279\u5B9A\u6A21\u5F0F\u7684\u65F6\u95F4\u6570\u636E\uFF0C\u9700\u8981\u4F7F\u7528 <code>d3.timeParse(specifier)</code> \u6784\u5EFA\u4E00\u4E2A\u65F6\u95F4\u89E3\u6790\u5668\uFF0C\u5165\u53C2\u4E5F\u662F\u4E00\u4E2A <code>specifier</code> \u5B57\u7B26\u4E32</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> parseTime <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">timeParse</span><span class="token punctuation">(</span><span class="token string">&quot;%B %d, %Y&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">parseTime</span><span class="token punctuation">(</span><span class="token string">&quot;November 04, 2021&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Thu Nov 04 2021 00:00:00 GMT+0800 (\u4E2D\u56FD\u6807\u51C6\u65F6\u95F4)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,13);function t(o,p){return s}var l=e(a,[["render",t]]);export{l as default};
